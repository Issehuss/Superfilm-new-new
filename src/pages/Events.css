/* src/pages/Events.css */
.events-page { --brand-yellow: 241 183 7; padding: 1.25rem; }

/* header */
.page-head{display:flex;align-items:end;justify-content:space-between;gap:1rem;margin-bottom:1.25rem;}
.head-copy{min-width:0;}
.head-actions{display:flex;gap:.75rem;align-items:center;}
.head-cta-row{display:flex;gap:.75rem;align-items:center;}
.search{background:#111215;color:#fff;border:1px solid #3f3f46;border-radius:9999px;padding:.6rem .9rem;min-width:260px;outline:none;}
.search:focus{border-color:rgb(var(--brand-yellow)/.7);box-shadow:0 0 0 2px rgb(var(--brand-yellow)/.25);}

/* grid */
.poster-grid{display:grid;gap:18px;grid-template-columns:repeat(1,minmax(0,1fr));}
@media (min-width:760px){.poster-grid{grid-template-columns:repeat(2,minmax(0,1fr));}}
@media (min-width:1200px){.poster-grid{grid-template-columns:repeat(3,minmax(0,1fr));}}

/* poster card */
.poster-card{background:#0d0e12;border:1px solid #30303a;border-radius:14px;overflow:hidden;box-shadow:0 12px 28px rgba(0,0,0,.35);transition:transform .12s ease,box-shadow .15s ease,border-color .15s ease;}
.poster-card:hover{transform:translateY(-2px);border-color:rgb(var(--brand-yellow)/.55);box-shadow:0 0 0 1px rgb(var(--brand-yellow)/.35),0 12px 32px rgba(0,0,0,.45),0 0 36px 12px rgb(var(--brand-yellow)/.12);}
.poster-media{position:relative;width:100%;aspect-ratio:3/4;background:#1a1b20;}
.poster-media img{width:100%;height:100%;object-fit:cover;display:block;}
.poster-date{position:absolute;top:10px;left:10px;background:rgba(0,0,0,.7);border:1px solid #2a2b31;border-radius:10px;padding:6px 8px;line-height:1;text-align:center;font-weight:800;color:#fff;box-shadow:0 6px 16px rgba(0,0,0,.35);}
.poster-date .m{font-size:.7rem;color:#e5e7eb}.poster-date .d{font-size:1.1rem;margin-top:2px}
.poster-going-badge{position:absolute;top:10px;right:10px;display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:9999px;background:rgba(16,185,129,.92);border:1px solid rgba(5,150,105,.65);color:#06281e;font-weight:900;font-size:.78rem;letter-spacing:.01em;box-shadow:0 10px 20px rgba(0,0,0,.35);}
.poster-going-dot{width:8px;height:8px;border-radius:9999px;background:rgba(255,255,255,.95);box-shadow:0 0 0 2px rgba(0,0,0,.18);}
.poster-hidden-badge{position:absolute;bottom:10px;right:10px;display:inline-flex;align-items:center;padding:6px 10px;border-radius:9999px;background:rgba(239,68,68,.88);border:1px solid rgba(239,68,68,.55);color:#2a0707;font-weight:900;font-size:.78rem;letter-spacing:.01em;box-shadow:0 10px 20px rgba(0,0,0,.35);}
.poster-info{padding:.85rem;}
.poster-info .title{font-weight:800;color:#fff;margin:0 0 .35rem;font-size:1.15rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.poster-info .meta{color:#cbd5e1;font-size:.85rem;display:flex;align-items:center;gap:.5rem;}
.poster-info .meta .dot{width:6px;height:6px;border-radius:9999px;background:rgb(var(--brand-yellow));}
.poster-info .tags{margin-top:.5rem;display:flex;gap:.4rem;flex-wrap:wrap;}
.poster-info .tag{font-size:.75rem;color:#111;background:rgb(var(--brand-yellow));border-radius:9999px;padding:2px 8px;font-weight:800;}
.poster-info .summary{color:#d1d5db;font-size:.9rem;margin-top:.5rem;}

/* empty */
.empty{grid-column:1 / -1;color:#a1a1aa;padding:2rem 0;}

/* buttons */
.btn{border:0;cursor:pointer;font-weight:800;border-radius:9999px;padding:.6rem 1rem;}
.btn.primary{background:rgb(var(--brand-yellow));color:#111;box-shadow:0 8px 24px rgba(0,0,0,.35);}
.btn.primary:hover{filter:brightness(1.05);}
.btn.ghost{background:#111215;color:#e5e5e5;border:1px solid #3f3f46;}
.btn.ghost:hover{border-color:#52525b;}
.btn.sm{padding:8px 12px;border-radius:10px;font-size:.95rem;}

/* PWA/mobile standalone polish */
.events-page.events-page-pwa .page-head{
  flex-direction:column;
  align-items:stretch;
  gap:.85rem;
}
.events-page.events-page-pwa .head-copy{
  max-width:100%;
}
.events-page.events-page-pwa .head-copy p{
  margin-top:.45rem;
  line-height:1.45;
}
.events-page.events-page-pwa .head-actions{
  width:100%;
  flex-direction:column;
  align-items:stretch;
  gap:.65rem;
}
.events-page.events-page-pwa .search{
  width:100%;
  min-width:0;
  padding:.72rem 1rem;
}
.events-page.events-page-pwa .head-cta-row{
  justify-content:flex-end;
  flex-wrap:wrap;
}
.events-page.events-page-pwa .poster-grid{
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:12px;
}
.events-page.events-page-pwa .poster-card{
  border-radius:12px;
}
.events-page.events-page-pwa .poster-info{
  padding:.65rem;
}
.events-page.events-page-pwa .poster-info .title{
  font-size:.95rem;
  margin-bottom:.3rem;
}
.events-page.events-page-pwa .poster-info .meta{
  font-size:.73rem;
  gap:.35rem;
}
.events-page.events-page-pwa .poster-info .summary{
  font-size:.76rem;
  margin-top:.4rem;
  color:#cbd5e1;
  line-height:1.3;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}
.events-page.events-page-pwa .poster-info .tags{
  margin-top:.38rem;
  gap:.28rem;
}
.events-page.events-page-pwa .poster-info .tag{
  font-size:.68rem;
  padding:2px 6px;
}
.events-page.events-page-pwa .poster-date{
  top:8px;
  left:8px;
  border-radius:9px;
  padding:5px 7px;
}
.events-page.events-page-pwa .poster-date .m{font-size:.62rem;}
.events-page.events-page-pwa .poster-date .d{font-size:1rem;}

@media (max-width:340px){
  .events-page.events-page-pwa .poster-grid{
    grid-template-columns:1fr;
  }
}

/* ---------------- Modal ---------------- */
.events-modal-overlay{position:fixed;inset:0;z-index:60;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;padding:20px;overflow:auto;}
@media (max-width:900px){.events-modal-overlay{align-items:flex-start;}}
.events-modal{width:min(1100px,96vw);max-height:94vh;display:flex;flex-direction:column;overflow:hidden;background:#0b0c0f;border:1px solid #30303a;border-radius:16px;color:#fff;box-shadow:0 24px 76px rgba(0,0,0,.5);}
.events-modal__header{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-bottom:1px solid #2a2b31;}
.modal-x{background:transparent;color:#cbd5e1;border:0;font-size:22px;line-height:1;cursor:pointer}.modal-x:hover{color:#fff}
.events-modal__tabs{display:flex;gap:10px;padding:10px 14px 12px;border-bottom:1px solid #2a2b31;}
.events-modal__tabs .tab{background:#111215;color:#e5e5e5;border:1px solid #3f3f46;border-radius:9999px;padding:6px 12px;font-weight:800;}
.events-modal__tabs .tab.is-active{border-color:rgb(var(--brand-yellow)/.7);box-shadow:0 0 0 2px rgb(var(--brand-yellow)/.25);}
.events-modal__body{padding:14px;overflow:auto;-webkit-overflow-scrolling:touch;}

/* poster stage â€” always visible */
.stage-wrap{display:flex;flex-direction:column;align-items:center;gap:10px;}
.poster-stage{--max-h:min(70vh,820px);height:var(--max-h);width:calc(var(--max-h) * 0.75);position:relative;overflow:hidden;border:1px solid #2b2c34;border-radius:14px;background:#0f1014;box-shadow:0 20px 40px rgba(0,0,0,.35);}
.poster-editor-bg{width:100%;height:100%;object-fit:cover;display:block;}
.poster-editor-canvas{position:absolute;inset:0;width:100%;height:100%;touch-action:none;}

/* tool rail overlay (touching poster) */
.tool-rail.overlay{position:absolute;right:8px;top:8px;display:flex;flex-direction:column;gap:8px;background:rgba(15,16,20,.7);backdrop-filter:blur(6px);border:1px solid #2b2c34;border-radius:12px;padding:6px;align-items:center;box-shadow:0 12px 24px rgba(0,0,0,.25);}
.rail-item{position:relative;}
.rail-btn{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#e5e5e5;background:#12131a;border:1px solid #31323c;cursor:pointer;}
.rail-btn:hover{border-color:#4b4c55;}
.rail-btn.active{border-color:rgb(var(--brand-yellow)/.7);box-shadow:0 0 0 2px rgb(var(--brand-yellow)/.25);}
.flyout{position:absolute;min-width:220px;background:#0f1014;border:1px solid #2b2c34;border-radius:12px;padding:10px;box-shadow:0 24px 40px rgba(0,0,0,.4);z-index:30;}
.flyout.left{left:-232px;top:0;} /* opens toward poster center */
.flyout .row{display:flex;align-items:center;gap:8px;}
.flyout .hint{color:#a1a1aa;font-size:.85rem;}
.tool-btn{background:#12131a;color:#e5e5e5;border:1px solid #31323c;border-radius:10px;padding:6px 10px;font-weight:700;cursor:pointer;}
.tool-btn.danger{border-color:#582a2a;}
.tool-toggle{width:36px;height:36px;border-radius:8px;background:#12131a;color:#e5e5e5;border:1px solid #31323c;font-weight:900;cursor:pointer;}
.tool-toggle.on{border-color:rgb(var(--brand-yellow)/.7);box-shadow:0 0 0 2px rgb(var(--brand-yellow)/.25);}

/* thumbs */
.library-grid{display:grid;gap:8px;grid-template-columns:repeat(5,minmax(0,1fr));}
.library-grid.small{grid-template-columns:repeat(3,minmax(0,1fr));}
.lib-thumb{aspect-ratio:4/3;border-radius:8px;overflow:hidden;border:2px solid transparent;}
.lib-thumb img{width:100%;height:100%;object-fit:cover;display:block;}
.lib-thumb.is-selected{border-color:rgb(var(--brand-yellow));}

/* eraser outline cursor */
.eraser-cursor{position:absolute;border:2px dashed rgba(255,255,255,.9);pointer-events:none;mix-blend-mode:overlay;border-radius:50%;}
.eraser-cursor.square{border-radius:4px;}

/* text layers */
.text-layer{position:absolute;transform:translate(-2px,-2px);cursor:move;padding:2px 4px;}
.text-layer .text-span{outline:none;cursor:text;user-select:text;display:block;word-break:break-word;}
.text-layer.is-selected{outline:2px dashed rgb(var(--brand-yellow));outline-offset:2px;border-radius:6px;}
.resize-handle{position:absolute;right:-8px;top:50%;transform:translateY(-50%);width:14px;height:14px;border-radius:3px;background:rgb(var(--brand-yellow));box-shadow:0 0 0 2px rgba(0,0,0,.35);cursor:ew-resize;}
.scale-handle{position:absolute;right:-8px;bottom:-8px;width:14px;height:14px;border-radius:3px;background:#ffd166;box-shadow:0 0 0 2px rgba(0,0,0,.35);cursor:nwse-resize;}

/* bottom icon bar */
.poster-actions-icons{display:flex;gap:8px;align-items:center;width:100%;}
.icon-btn{width:42px;height:42px;border-radius:12px;background:#12131a;color:#e5e5e5;border:1px solid #31323c;display:flex;align-items:center;justify-content:center;cursor:pointer;}
.icon-btn:hover{border-color:#4b4c55;}
.poster-actions-icons .spacer{flex:1;}

/* detail step utilities */
.grid{display:grid;} .gap-4{gap:1rem;} .md\:grid-cols-2{grid-template-columns:repeat(1,minmax(0,1fr));}
@media (min-width:900px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr));}}
.col-span-2{grid-column:span 2;}
.toggle{display:inline-flex;align-items:center;gap:.5rem;color:#e5e5e5;} .ml-auto{margin-left:auto;}
.input{width:100%;background:#111215;color:#fff;border:1px solid #3f3f46;border-radius:10px;padding:10px 12px;outline:none;}
.input.compact{padding:6px 8px;border-radius:8px;}
.input:focus{border-color:rgb(var(--brand-yellow)/.7);box-shadow:0 0 0 2px rgb(var(--brand-yellow)/.25);}
.w-20{width:5.5rem;}
.color-swatch{position:relative;width:36px;height:36px;border:1px solid #3f3f46;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#111215;}
.color-swatch input{position:absolute;inset:0;opacity:0;cursor:pointer;}
.color-swatch .swatch{width:20px;height:20px;border-radius:4px;box-shadow:0 0 0 1px rgba(255,255,255,.25) inset;}

/* -------- Polotno embedded studio -------- */
.poster-step {
  display: grid;
  grid-template-rows: 1fr auto;
  gap: 12px;
  min-height: 0;               /* allow internal scroll */
  overflow: hidden;
}

/* Wrap containing Polotno layout */
.studio-wrap {
  min-height: 0;
  border: 1px solid #2b2c34;
  border-radius: 12px;
  overflow: hidden;
  background: #0f1014;
}

/* Middle area with a compact tool rail tight to canvas */
.studio-center {
  position: relative;
  display: grid;
  grid-template-columns: auto 1fr; /* rail + canvas */
  min-width: 0;
  min-height: 0;
}

/* The icon rail hugs the canvas */
.studio-rail {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 8px;
  border-right: 1px solid #26262b;
  background: #0c0d10;
  min-width: 48px;
}
.studio-rail-sep {
  height: 1px;
  width: 100%;
  background: #1f2026;
  margin: 4px 0;
}

/* Canvas area should stretch and scroll nicely within modal body */
.studio-canvas {
  min-width: 0;
  min-height: 0;
  overflow: auto;
}

/* Small icon buttons */
.studio-icon-btn {
  width: 36px;
  height: 36px;
  display: grid;
  place-items: center;
  border-radius: 8px;
  border: 1px solid #2a2b31;
  background: #111215;
  color: #e5e7eb;
  cursor: pointer;
  box-shadow: 0 4px 14px rgba(0,0,0,.25);
}
.studio-icon-btn:hover { border-color: #52525b; }
.studio-icon svg,
.studio-icon-btn svg {
  width: 18px;
  height: 18px;
}

/* Keep modal body scrollable and header/tabs fixed */
.events-modal {
  width: min(1100px, 96vw);
  max-height: 94vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.events-modal__body {
  padding: 14px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* Footer under the studio */
.studio-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}
.studio-loading {
  padding: 12px;
  color: #a1a1aa;
}

/* Minimal chrome for the poster studio */
.studio-min{
  display:grid;
  grid-template-rows: 1fr auto;
  height: min(78vh, 820px);
  border:1px solid #2b2c34;
  border-radius:12px;
  overflow:hidden;
  background:#0f1014;
}

/* canvas area */
.studio-board{
  position:relative;
  display:grid;
  place-items:center;
  overflow:hidden;
  background:#0a0b0e;
}

/* small top bar (only appears for text selection) */
.studio-topbar{
  position:absolute;
  top:8px; left:50%;
  transform: translateX(-50%);
  display:flex; gap:8px; align-items:center;
  padding:6px 8px;
  background:rgba(15,16,20,.78);
  border:1px solid #2b2c34;
  border-radius:10px;
  backdrop-filter: blur(6px);
  box-shadow:0 12px 24px rgba(0,0,0,.3);
}
.studio-topbar .hint{ color:#a1a1aa; font-size:.85rem; }

/* left icon rail */
.studio-leftbar{
  position:absolute;
  left:8px; top:50%;
  transform: translateY(-50%);
  display:flex; flex-direction:column; gap:8px;
  padding:6px;
  background:rgba(15,16,20,.78);
  border:1px solid #2b2c34;
  border-radius:12px;
  backdrop-filter: blur(6px);
  box-shadow:0 12px 24px rgba(0,0,0,.3);
  z-index:2;
}

/* bottom bar */
.studio-bottombar{
  display:flex; align-items:center; gap:8px;
  padding:8px;
  border-top:1px solid #2b2c34;
  background:#0b0c0f;
}
.studio-bottombar .hint{ color:#a1a1aa; font-size:.85rem; }
.studio-bottombar .spacer{ flex:1; }

/* re-use existing tokens */
.icon-btn{ width:40px; height:40px; border-radius:10px; background:#12131a; color:#e5e5e5; border:1px solid #31323c; display:flex; align-items:center; justify-content:center; cursor:pointer; }
.icon-btn.active{ border-color:rgb(var(--brand-yellow)/.7); box-shadow:0 0 0 2px rgb(var(--brand-yellow)/.25); }
.icon-btn:hover{ border-color:#4b4c55; }
.rail-item{ position:relative; }
.flyout{ position:absolute; min-width:220px; background:#0f1014; border:1px solid #2b2c34; border-radius:12px; padding:10px; box-shadow:0 24px 40px rgba(0,0,0,.4); z-index:30; }
.flyout.left{ left:-232px; top:0; }
.flyout .row{ display:flex; align-items:center; gap:8px; }
.flyout .hint{ color:#a1a1aa; font-size:.85rem; }

/* Compact studio layout */
.studio-shell {
  display: grid;
  grid-template-columns: 120px 1fr; /* left rail + poster */
  gap: 12px;
  align-items: stretch;
  min-height: 0;
}

.studio-left {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 6px;
  background: #0c0d10;
  border: 1px solid #26262b;
  border-radius: 12px;
}

.rail-text {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px 10px;
  border-radius: 8px;
  background: #111215;
  border: 1px solid #2a2b31;
  color: #e5e7eb;
  font-weight: 800;
  cursor: pointer;
}
.rail-text:hover { border-color: #4b4c55; }

.canvas-wrap {
  position: relative;
  display: grid;
  place-items: center;
  background: #0a0b0e;
  border: 1px solid #26262b;
  border-radius: 12px;
  overflow: hidden; /* poster inside */
  min-height: 0;
}

.canvas-panel {
  position: absolute;
  top: 8px;
  left: 8px;
  z-index: 20;
  background: #0f1014;
  border: 1px solid #2b2c34;
  border-radius: 10px;
  padding: 8px;
  box-shadow: 0 24px 40px rgba(0,0,0,.4);
}

.text-toolbar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 10px;
  margin-top: 8px;
  background: #0c0d10;
  border: 1px solid #26262b;
  border-radius: 10px;
}
.text-toolbar .spacer { flex: 1; }

/* Prevent any pseudo-element headers above the poster in the preview card */
.poster-card::before,
.poster-card .poster-media::before {
  content: none !important;
}
